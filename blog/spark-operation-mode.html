
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Spark运行模式 - Rukey</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="TriDiamond Obsidian,"> 
    <meta name="description" content="官网说明：http://spark.apache.org/docs/latest/submitting-applications.html
目前spark支持的运行模式主要有Local、Standa,"> 
    <meta name="author" content="shirukai"> 
    <link rel="alternative" href="atom.xml" title="Rukey" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link href="https://fonts.loli.net/css?family=Roboto+Mono|Rubik&display=swap" rel="stylesheet">
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">

    
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">

    
<link rel="stylesheet" href="/css/obsidian.css">

    
<link rel="stylesheet" href="/css/ball-atom.min.css">

<meta name="generator" content="Hexo 5.4.0"></head>


<body class="loading">
    <div class="loader">
        <div class="la-ball-atom la-2x">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <span id="config-title" style="display:none">Rukey</span>
    <div id="loader"></div>
    <div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="/img/favicon.png" alt="" data-url="https://shirukai.github.io">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">Spark运行模式</h3>
        <div class="social">
            <!--        <div class="like-icon">-->
            <!--            <a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
            <!--        </div>-->
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        <div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
            animation-delay: 600ms;
            animation-duration: 1.2s;
            background-image: 
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url(/img/covers/8.jpg);">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                <a href="/categories/Spark"><b>「
                    </b>SPARK<b> 」</b></a>
                
                August 29, 2018
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/blog/spark-operation-mode.html" title="Spark运行模式" class="">Spark运行模式</a>
            </h3>
            
            <p class="post-count animated fadeInDown">
                
                <span>
                    <b class="iconfont icon-text2"></b> <i>Words count</i>
                    9.1k
                </span>
                
                
                <span>
                    <b class="iconfont icon-timer__s"></b> <i>Reading time</i>
                    8 mins.
                </span>
                
                
                
                <span id="busuanzi_container_page_pv">
                    <b class="iconfont icon-read"></b> <i>Read count</i>
                    <span id="busuanzi_value_page_pv">0</span>
                </span>
                
            </p>
            
            
            <ul class="animated fadeInDown post-tags-list" itemprop="keywords"><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/Python3%E5%AE%9E%E6%88%98Spark%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" rel="tag">Python3实战Spark大数据分析</a></li><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/Spark/" rel="tag">Spark</a></li></ul>
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s"></span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <p>官网说明：<a target="_blank" rel="noopener" href="http://spark.apache.org/docs/latest/submitting-applications.html">http://spark.apache.org/docs/latest/submitting-applications.html</a></p>
<p>目前spark支持的运行模式主要有Local、Standalone、Mesos、YARN、Kubernetes。这里主要记录spark在Local、Standalone、YARN环境下运行。</p>
<p>假如目前我们有一个简单的wordcount应用，将分别在以下环境中运行。</p>
<p>wordcount.py，文件路径：/Users/shirukai/Desktop/HollySys/Repository/learn-demo-pyspark/wordcount.py</p>
<pre><code class="python">&quot;&quot;&quot;
Created by shirukai on 2018/8/28
&quot;&quot;&quot;
from pyspark import SparkConf, SparkContext

if __name__ == &#39;__main__&#39;:
    conf = SparkConf()
    sc = SparkContext(conf=conf)
    input = [
        &#39;This tutorial provides a quick introduction to using Spark. We will first introduce the API through Spark’s interactive shell (in Python or Scala), then show how to write applications in Java, Scala, and Python.&#39;,
        &#39;To follow along with this guide, first download a packaged release of Spark from the Spark website. Since we won’t be using HDFS, you can download a package for any version of Hadoop.&#39;,
        &#39;Note that, before Spark 2.0, the main programming interface of Spark was the Resilient Distributed Dataset (RDD). After Spark 2.0, RDDs are replaced by Dataset, which is strongly-typed like an RDD, but with richer optimizations under the hood. The RDD interface is still supported, and you can get a more complete reference at the RDD programming guide. However, we highly recommend you to switch to use Dataset, which has better performance than RDD. See the SQL programming guide to get more information about Dataset.&#39;]
    words = sc.parallelize(input) \
        .map(lambda line: line.replace(&quot;. &quot;, &quot; &quot;).replace(&quot;, &quot;, &quot; &quot;).rstrip(&quot;.&quot;)) \
        .flatMap(lambda line: line.split(&quot; &quot;)) \
        .map(lambda word: (word, 1)) \
        .reduceByKey(lambda a, b: a + b) \
        .map(lambda x: (x[1], x[0])) \
        .sortByKey(False) \
        .map(lambda x: (x[1], x[0]))
    print(words.take(3))
</code></pre>
<h2 id="1-Local模式"><a href="#1-Local模式" class="headerlink" title="1 Local模式"></a>1 Local模式</h2><p>Local模式主要是在开发测试应用的时候使用。</p>
<h3 id="1-1-使用spark-submit的本地模式提交应用"><a href="#1-1-使用spark-submit的本地模式提交应用" class="headerlink" title="1.1 使用spark-submit的本地模式提交应用"></a>1.1 使用spark-submit的本地模式提交应用</h3><p>进入spark-home</p>
<pre><code class="shell">cd $SPARK_HOME
</code></pre>
<p>提交应用</p>
<pre><code class="shell">./bin/spark-submit\
 --master local[2]\
 --name spark-local\
 /Users/shirukai/Desktop/HollySys/Repository/learn-demo-pyspark/wordcount.py
</code></pre>
<p>–master:指定运行模式</p>
<p>–name:指定应用名字</p>
<p>路径</p>
<h3 id="1-2-Lcoal-Master-URL说明"><a href="#1-2-Lcoal-Master-URL说明" class="headerlink" title="1.2 Lcoal Master URL说明"></a>1.2 Lcoal Master URL说明</h3><table>
<thead>
<tr>
<th>Master URL</th>
<th>Meaning</th>
</tr>
</thead>
<tbody><tr>
<td>local</td>
<td>运行在一个线程上</td>
</tr>
<tr>
<td>local[K]</td>
<td>运行在K个线程上</td>
</tr>
<tr>
<td>local[K,F]</td>
<td>K个线程，最大F次失败</td>
</tr>
<tr>
<td>local[*]</td>
<td>最大线程</td>
</tr>
<tr>
<td>local[*,F]</td>
<td>最大线程，最大F次失败</td>
</tr>
</tbody></table>
<h2 id="2-Standalone模式"><a href="#2-Standalone模式" class="headerlink" title="2 Standalone模式"></a>2 Standalone模式</h2><h3 id="2-1-启动spark集群"><a href="#2-1-启动spark集群" class="headerlink" title="2.1 启动spark集群"></a>2.1 启动spark集群</h3><p>修改 $SPARK_HOME/conf/slaves,将所节点的hostname添加到此文件中。</p>
<pre><code class="shell">sh $SPARK_HOME/sbin/start-all.sh 
</code></pre>
<p>jps 查看进程</p>
<pre><code class="shell">shirukaideMacBook-Pro:conf shirukai$ jps
1633 Master
1676 Worker
</code></pre>
<p>服务启动后，我们可以访问spark的WebUI ，正常的地址为hostname:8080,这里我的端口改为18080，访问localhost:18080</p>
<p><img src="http://shirukai.gitee.io/images/9386090d6ad81573e502323d9dcd6b42.jpg"></p>
<h3 id="2-2-在Standalone模式下启动pyspark交互式进程"><a href="#2-2-在Standalone模式下启动pyspark交互式进程" class="headerlink" title="2.2 在Standalone模式下启动pyspark交互式进程"></a>2.2 在Standalone模式下启动pyspark交互式进程</h3><p>由上图可以看出，我们的master的url为：spark://shirukaideMacBook-Pro.local:7077</p>
<p>进入spark-home</p>
<pre><code class="shell">cd $SPARK_HOME
</code></pre>
<p>启动pyspark</p>
<pre><code class="shell">./bin/pyspark --master spark://shirukaideMacBook-Pro.local:7077
</code></pre>
<p>启动后，可以在web界面上，看到，我们已经启动的交互式应用</p>
<p><img src="http://shirukai.gitee.io/images/081dcd6dd8fcc9f29181d9f493cbf813.jpg"></p>
<p>这时候我们可以查看应用详情：</p>
<p><img src="http://shirukai.gitee.io/images/5baca29dcb9e305b797363ea4e952cd2.gif"></p>
<p>因为我们没有进行任何操作，所以我们的详情里的内容是空的，接下在，我们在pyspark里，进行交互性操作</p>
<pre><code class="shell">      ____              __
     / __/__  ___ _____/ /__
    _\ \/ _ \/ _ `/ __/  &#39;_/
   /__ / .__/\_,_/_/ /_/\_\   version 2.3.1
      /_/

Using Python version 3.6.4 (default, Jan 16 2018 12:04:33)
SparkSession available as &#39;spark&#39;.
&gt;&gt;&gt; data=[1,2,3,4,5]
&gt;&gt;&gt; rdd=sc.p
sc.parallelize(        sc.pickleFile(         sc.profiler_collector  sc.pythonExec          sc.pythonVer           
&gt;&gt;&gt; rdd=sc.parallelize(data)
&gt;&gt;&gt; rdd.collect()
[1, 2, 3, 4, 5]                                                                 
&gt;&gt;&gt; 
</code></pre>
<p>刷新应用详情页面，发现我们有详情生成</p>
<p><img src="http://shirukai.gitee.io/images/38201ffcea7681804f57a3c3c1e4cd2b.jpg"></p>
<h3 id="2-3-使用spark-submit的Standalone模式提交应用"><a href="#2-3-使用spark-submit的Standalone模式提交应用" class="headerlink" title="2.3 使用spark-submit的Standalone模式提交应用"></a>2.3 使用spark-submit的Standalone模式提交应用</h3><p>进入spark-home</p>
<pre><code class="shell">cd $SPARK_HOME
</code></pre>
<p>提交应用</p>
<pre><code class="shell">./bin/spark-submit\
 --master spark://shirukaideMacBook-Pro.local:7077\
 --name spark-standalone\
 /Users/shirukai/Desktop/HollySys/Repository/learn-demo-pyspark/wordcount.py
</code></pre>
<p><img src="http://shirukai.gitee.io/images/e2e679c9499a87cbd12849a6c85d6b3d.jpg"></p>
<p>注意：如果使用standalone模式，而且节点数大于1的时候，如果使用本地文件测试，必须要本证每个节点都要有相同的文件。</p>
<h2 id="3-YARN-模式"><a href="#3-YARN-模式" class="headerlink" title="3 YARN 模式"></a>3 YARN 模式</h2><p>大多数都使用Spark on YARN模式，它是把Spark当做客户端，把作业提交到YARN上执行，不需要spark集群（不需要启动spark的master、和worker）</p>
<h3 id="3-1-使用spark-submit的YARN模式提交应用"><a href="#3-1-使用spark-submit的YARN模式提交应用" class="headerlink" title="3.1 使用spark-submit的YARN模式提交应用"></a>3.1 使用spark-submit的YARN模式提交应用</h3><h4 id="3-1-1-在提交应用之前，需要启动hadoop集群。"><a href="#3-1-1-在提交应用之前，需要启动hadoop集群。" class="headerlink" title="3.1.1 在提交应用之前，需要启动hadoop集群。"></a>3.1.1 在提交应用之前，需要启动hadoop集群。</h4><pre><code class="shell">shirukaideMacBook-Pro:~ shirukai$ jps
2625 NameNode
2706 DataNode
3011 NodeManager
3032 Jps
2810 SecondaryNameNode
2923 ResourceManager
1326 SparkSubmit
</code></pre>
<p>我们可以看出我们YARN的ResourceManager和NodeManager已经启动。进入YARN的WebUI查看，<a target="_blank" rel="noopener" href="http://localhost:8088/cluster">http://localhost:8088/cluster</a></p>
<p><img src="http://shirukai.gitee.io/images/698680434226a8bb43964b861e304354.jpg"></p>
<p>由上图可以看出目前没有YARN的资源分配给spark。</p>
<h4 id="3-1-2-提交应用"><a href="#3-1-2-提交应用" class="headerlink" title="3.1.2 提交应用"></a>3.1.2 提交应用</h4><p>进入spark-home</p>
<pre><code class="shell">cd $SPARK_HOME
</code></pre>
<p>提交应用</p>
<pre><code class="shell">./bin/spark-submit\
 --master yarn\
 --name spark-yarn\
 /Users/shirukai/Desktop/HollySys/Repository/learn-demo-pyspark/wordcount.py
</code></pre>
<p>报错：</p>
<p><img src="http://shirukai.gitee.io/images/01b123c43dfa5c1fd4645cf8f1762bc6.jpg"></p>
<p>从错误信息中可以看出，我们的worker的python版本跟driver的Python版本不一致，这时候需要我们设置环境变量。PYSPARK_PYTHON and PYSPARK_DRIVER_PYTHON，修改$SPARK_HOME/conf/spark-env.sh文件，在其中添加如下内容，指定一下python环境：</p>
<pre><code class="shell">export PYSPARK_PYTHON=/Users/shirukai/anaconda3/bin/python
export PYSPARK_DRIVER_PYTHON=/Users/shirukai/anaconda3/bin/python
</code></pre>
<p>然后再次启动，执行成功，查看YARN的界面</p>
<p><img src="http://shirukai.gitee.io/images/9d84c666e7c2a06d96b3438acfca798a.jpg"></p>
<h4 id="3-1-3-deploy-mode"><a href="#3-1-3-deploy-mode" class="headerlink" title="3.1.3 deploy-mode"></a>3.1.3 deploy-mode</h4><p>–master yarn-client 或者 –master yarn-cluster</p>
<p>yarn支持client（默认）和cluster模式：dirver运行在哪里</p>
<p>client：提交作业的进程是不能停止的，否则作业就挂了</p>
<p>cluster：提交完作业，那么提交作业端就可以断开了，因为driver是运行在am里的。</p>
<h4 id="3-1-4-使用YARN查看application日志"><a href="#3-1-4-使用YARN查看application日志" class="headerlink" title="3.1.4 使用YARN查看application日志"></a>3.1.4 使用YARN查看application日志</h4><p>例如我们的applicationId为：application_1535511788876_0002</p>
<pre><code class="shell">yarn logs -applicationId application_1535511788876_0002
</code></pre>
<p>发现报错：</p>
<pre><code class="shell">18/08/29 11:31:40 INFO client.RMProxy: Connecting to ResourceManager at /0.0.0.0:8032
18/08/29 11:31:40 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
/tmp/logs/hdfs/logs/application_1535511788876_0002 does not exist.
Log aggregation has not completed or is not enabled.
</code></pre>
<p>原因是我们的日志聚合功能没有开启，需要设置Yarn的JobHistory：//todo</p>
<h4 id="思考："><a href="#思考：" class="headerlink" title="思考："></a>思考：</h4><p>如何规避如下问题：</p>
<p>Neither spark.yarn.jars nor spark.yarn.archive is set, falling back to uploading libraries under SPARK_HOME.</p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
            <ul id="audio-list" style="display:none">
                
                
                <li title='0' data-url='/statics/Otokaze - Mallow Flower.mp3'></li>
                
                    
            </ul>
            
            
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="http://shirukai.gitee.io/images/a2199f66b2599b9ee3c7bba89fbac4b4.jpg" height=300 width=300></img>
                    <p>shirukai</p>
                    <span>Alway believe that something wonderful is about to happen</span>
                    <dl>
                        <dd><a href="https://github.com/shirukai" target="_blank"><span
                                    class=" iconfont icon-github"></span></a></dd>
                        <dd><a href="" target="_blank"><span
                                    class=" iconfont icon-twitter"></span></a></dd>
                        <dd><a href="" target="_blank"><span
                                    class=" iconfont icon-stack-overflow"></span></a></dd>
                    </dl>
                </div>
                <ul>
                    <li><a href="/">285 <p>Articles</p></a></li>
                    <li><a href="/categories">25 <p>Categories</p></a></li>
                    <li><a href="/tags">46 <p>Tags</p></a></li>
                </ul>
            </div>
            
            
            
            <div class="box sticky animated fadeInRight faster">
                <div id="toc" class="subbox">
                    <h4>Contents</h4>
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Local%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.</span> <span class="toc-text">1 Local模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E4%BD%BF%E7%94%A8spark-submit%E7%9A%84%E6%9C%AC%E5%9C%B0%E6%A8%A1%E5%BC%8F%E6%8F%90%E4%BA%A4%E5%BA%94%E7%94%A8"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 使用spark-submit的本地模式提交应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Lcoal-Master-URL%E8%AF%B4%E6%98%8E"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 Lcoal Master URL说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Standalone%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">2 Standalone模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%90%AF%E5%8A%A8spark%E9%9B%86%E7%BE%A4"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 启动spark集群</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%9C%A8Standalone%E6%A8%A1%E5%BC%8F%E4%B8%8B%E5%90%AF%E5%8A%A8pyspark%E4%BA%A4%E4%BA%92%E5%BC%8F%E8%BF%9B%E7%A8%8B"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 在Standalone模式下启动pyspark交互式进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E4%BD%BF%E7%94%A8spark-submit%E7%9A%84Standalone%E6%A8%A1%E5%BC%8F%E6%8F%90%E4%BA%A4%E5%BA%94%E7%94%A8"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 使用spark-submit的Standalone模式提交应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-YARN-%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">3 YARN 模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E4%BD%BF%E7%94%A8spark-submit%E7%9A%84YARN%E6%A8%A1%E5%BC%8F%E6%8F%90%E4%BA%A4%E5%BA%94%E7%94%A8"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 使用spark-submit的YARN模式提交应用</span></a></li></ol></li></ol>
                </div>
            </div>
            
            
        </div>
    </div>
</div>

    </div>
</div>
    <div id="back-to-top" class="animated fadeIn faster">
        <div class="flow"></div>
        <span class="percentage animated fadeIn faster">0%</span>
        <span class="iconfont icon-top02 animated fadeIn faster"></span>
    </div>
</body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2021
        <span class="gradient-text">
            shirukai
        </span>.
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
        Theme
        <span class="gradient-text">
            <a href="https://github.com/TriDiamond/hexo-theme-obsidian" title="Obsidian" target="_blank" rel="noopener">Obsidian</a>
        </span>
        <small><a href="https://github.com/TriDiamond/hexo-theme-obsidian/blob/master/CHANGELOG.md" title="v1.4.3" target="_blank" rel="noopener">v1.4.3</a></small>
    </p>
</footer>

<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script>
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX", "TeX"],
      linebreaks: {
        automatic: true
      },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [
        ["$", "$"],
        ["\\(", "\\)"]
      ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      noUndefined: {
        attributes: {
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "90%"
        }
      },
      Macros: {
        href: "{}"
      }
    },
    messageStyle: "none"
  });
</script>
<script>
  function initialMathJax() {
    MathJax.Hub.Queue(function () {
      var all = MathJax.Hub.getAllJax(),
        i;
      // console.log(all);
      for (i = 0; i < all.length; i += 1) {
        console.log(all[i].SourceElement().parentNode)
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  }

  function reprocessMathJax() {
    if (typeof MathJax !== 'undefined') {
      MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
  }
</script>




<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/obsidian.js"></script>
<script src="/js/jquery.truncate.js"></script>
<script src="/js/search.js"></script>


<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>


<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>


<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>

    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>




    
<script src="/js/busuanzi.min.js"></script>

    <script>
        $(document).ready(function () {
            if ($('span[id^="busuanzi_"]').length) {
                initialBusuanzi();
            }
        });
    </script>



<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">


<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>



    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="//www.googletagmanager.com/gtag/js?id=UA-149874671-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-149874671-1');
    </script>





<script>
    function initialTyped () {
        var typedTextEl = $('.typed-text');
        if (typedTextEl && typedTextEl.length > 0) {
            var typed = new Typed('.typed-text', {
                strings: ["Alway believe that something wonderful is about to happen", "心之所向，素履以往。"],
                typeSpeed: 90,
                loop: true,
                loopCount: Infinity,
                backSpeed: 20,
            });
        }
    }

    if ($('.article-header') && $('.article-header').length) {
        $(document).ready(function () {
            initialTyped();
        });
    }
</script>




</html>
