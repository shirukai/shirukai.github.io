
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>主机页面开发记录 - Rukey</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="TriDiamond Obsidian,"> 
    <meta name="description" content="说明
说明：需要在后台发送http请求rest api接口，得到json数据，格式如下：

然后对json数据做处理，拿到经过base64编码的数据Value对应的值进行解码，拼接成datatabl,"> 
    <meta name="author" content="shirukai"> 
    <link rel="alternative" href="atom.xml" title="Rukey" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link href="https://fonts.loli.net/css?family=Roboto+Mono|Rubik&display=swap" rel="stylesheet">
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">

    
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">

    
<link rel="stylesheet" href="/css/obsidian.css">

    
<link rel="stylesheet" href="/css/ball-atom.min.css">

<meta name="generator" content="Hexo 5.4.0"></head>


<body class="loading">
    <div class="loader">
        <div class="la-ball-atom la-2x">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <span id="config-title" style="display:none">Rukey</span>
    <div id="loader"></div>
    <div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="/img/favicon.png" alt="" data-url="https://shirukai.github.io">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">主机页面开发记录</h3>
        <div class="social">
            <!--        <div class="like-icon">-->
            <!--            <a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
            <!--        </div>-->
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        <div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
            animation-delay: 600ms;
            animation-duration: 1.2s;
            background-image: 
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url(/img/covers/7.jpg);">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                <a href="/categories/项目开发记录"><b>「
                    </b>项目开发记录<b> 」</b></a>
                
                August 20, 2018
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/blog/host-page-development-record.html" title="主机页面开发记录" class="">主机页面开发记录</a>
            </h3>
            
            <p class="post-count animated fadeInDown">
                
                <span>
                    <b class="iconfont icon-text2"></b> <i>Words count</i>
                    34k
                </span>
                
                
                <span>
                    <b class="iconfont icon-timer__s"></b> <i>Reading time</i>
                    31 mins.
                </span>
                
                
                
                <span id="busuanzi_container_page_pv">
                    <b class="iconfont icon-read"></b> <i>Read count</i>
                    <span id="busuanzi_value_page_pv">0</span>
                </span>
                
            </p>
            
            
            <ul class="animated fadeInDown post-tags-list" itemprop="keywords"><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%92%E5%B7%A5%E5%85%B7/" rel="tag">大数据集群配置规划工具</a></li><li class="animated fadeInDown post-tags-list-item"><a class="animated fadeInDown post-tags-list-link" href="/tags/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/" rel="tag">项目开发记录</a></li></ul>
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s"></span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p><img src="https://shirukai.gitee.io/images/201712092011_621.png"></p>
<p>说明：需要在后台发送http请求rest api接口，得到json数据，格式如下：</p>
<p><img src="https://shirukai.gitee.io/images/201712092014_420.png"></p>
<p>然后对json数据做处理，拿到经过base64编码的数据Value对应的值进行解码，拼接成datatable指定的格式。</p>
<h2 id="用到的知识点："><a href="#用到的知识点：" class="headerlink" title="用到的知识点："></a>用到的知识点：</h2><h3 id="后端："><a href="#后端：" class="headerlink" title="后端："></a>后端：</h3><ul>
<li>java 利用httpclient进行http请求</li>
<li>json字符串转jsonArray、jsonObjects、map、list，利用gson或者json-lib对数据进行处理</li>
<li>list分页读取（subList方法）</li>
<li>base64编、解码</li>
<li>利用contains方法来判断字符串是否包含</li>
</ul>
<h3 id="前台："><a href="#前台：" class="headerlink" title="前台："></a>前台：</h3><ul>
<li>datatable后端分页</li>
<li>显示序号</li>
</ul>
<h2 id="java-http请求api"><a href="#java-http请求api" class="headerlink" title="java http请求api"></a>java http请求api</h2><p>调用已经写好的http请求实体类</p>
<pre><code>package com.inspur.bigdata.manage.cluster.host.util;

import com.inspur.bigdata.manage.common.utils.PropertiesUtil;
import net.sf.json.JSONObject;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.http.HttpEntity;
import org.apache.http.ParseException;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.*;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.util.EntityUtils;
import org.loushang.framework.exception.BusinessCodeException;
import org.springframework.http.HttpMethod;

import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.net.URI;

/**
 * rest请求工具类，封装HttpClient。
 */
public class HttpRequestUtil &#123;
    private static Log LOG = LogFactory.getLog(HttpRequestUtil.class);
    private static HttpRequestUtil host = new HttpRequestUtil();
    
    private HttpRequestUtil()&#123;&#125;
    
    public static HttpRequestUtil host()&#123;
        return host;
    &#125;
    
    /**
     * 获取应用地址
     * 
     * @param appName [应用名称]
     * @return
     */
    public static String getContext(String appName) &#123;
        LOG.debug(&quot;--&gt;获取应用地址，appName=&quot; + appName + &quot;。&quot;);
        // 获取集群配置中心地址
        String context;
        String envKey = appName.replace(&quot;.&quot;, &quot;_&quot;);
        String appNameFromSystem = System.getenv(envKey);
        if (appNameFromSystem == null || &quot;&quot;.equals(appNameFromSystem)) &#123;
            context = PropertiesUtil.getValue(&quot;conf.properties&quot;, appName);
            if (context == null || &quot;&quot;.equals(context)) &#123;
                context = appName.replace(&quot;.&quot;, &quot;-&quot;);
                LOG.debug(&quot;Use default context[&quot;+ context + &quot;].&quot;);
            &#125; else &#123;
                LOG.debug(&quot;Get context from conf.properties, key=&quot; + appName + &quot;, value=&quot; + appNameFromSystem);
            &#125;
        &#125; else &#123;
            LOG.debug(&quot;Get context from environment, environment key=&quot; + envKey + &quot;, value=&quot; + appNameFromSystem);
            context = appNameFromSystem;
        &#125;

        // 若AppName以http开头，则直接返回，主要用于开发测试环境
        if (!context.startsWith(&quot;http&quot;)) &#123;
            // 获取平台域名，用于生产环境
            // 先从环境变量里获取，如果没有再从配置文件里获取。
            String domainName = System.getenv(&quot;BIGDATA_DOMAIN&quot;);
            if (domainName == null || &quot;&quot;.endsWith(domainName)) &#123;
                domainName = PropertiesUtil.getValue(&quot;conf.properties&quot;, &quot;bigdata.domain&quot;);
                LOG.debug(&quot;Get domain from conf.properties, key=bigdata.domain, value=&quot; + domainName);
            &#125; else &#123;
                LOG.debug(&quot;Get domain from environment, environment key=BIGDATA_DOMAIN, value=&quot; + domainName);
            &#125;
            if (domainName != null &amp;&amp; !&quot;&quot;.equals(domainName)) &#123;
                
                // 组装默认集群配置地址。
                while(domainName.endsWith(&quot;/&quot;))
                    domainName = domainName.substring(0, domainName.lastIndexOf(&quot;/&quot;));
                if(domainName.startsWith(&quot;http://&quot;))
                    domainName = domainName.replaceAll(&quot;http://&quot;, &quot;&quot;).trim();
                context = &quot;http://&quot; + domainName + &quot;/&quot; + context;
            &#125; else &#123;
                new BusinessCodeException(&quot;manage-util-00002&quot;, &quot;平台域名未配置！&quot;);
            &#125;
        &#125;
        
        // 去掉结尾的“/”。
        if (context.endsWith(&quot;/&quot;)) &#123;
            context = context.substring(0, context.length() - 1);
        &#125;
        
        LOG.debug(&quot;&lt;-Get context, context=&quot; + context);
        return context;
    &#125;
    
    /**
     * post请求
     * @param restUrl
     * @param appName data
     * @return
     */
    public String doPost(String appName, String restUrl) &#123;
        String context = getContext(appName);
        String url = context + &quot;/service&quot; + restUrl;
        if(restUrl.startsWith(&quot;/service&quot;))
            url = context + restUrl;
        
        HttpPost httpPost = new HttpPost(url);
        return executeRequest(httpPost, HttpMethod.POST);
    &#125;
    
    public String doPut(String restUrl, String data) &#123;
        String url = restUrl;
        HttpPut httpPut = new HttpPut(url);
        
        try &#123;
            StringEntity se = new StringEntity(data);
            se.setContentType(&quot;text/json&quot;);
            httpPut.setEntity(se);
        &#125; catch (UnsupportedEncodingException e) &#123;
            e.printStackTrace();
        &#125;
        return executeRequest(httpPut, HttpMethod.PUT);
    &#125;
    
    public String doGet(String restUrl) &#123;
        String url = restUrl;
        HttpGet httpGet = new HttpGet(url);
        return executeRequest(httpGet, HttpMethod.GET);
    &#125;
    
    public void doDelete(String appName, String restUrl, String data) &#123;
        String context = getContext(appName);
        
        String url = context + &quot;/service&quot; + restUrl;
        if(restUrl.startsWith(&quot;/service&quot;))
            url = context + restUrl;
        
        HttpEntityEnclosingRequestBase httpDelete = new HttpEntityEnclosingRequestBase() &#123;
            @Override
            public String getMethod() &#123;
                return &quot;DELETE&quot;;
            &#125;
        &#125;;
        httpDelete.setURI(URI.create(url));
        
        if(data != null &amp;&amp; !&quot;&quot;.equals(data)) &#123;
            try &#123;
                StringEntity se = new StringEntity(data);
                se.setContentType(&quot;text/json&quot;);
                httpDelete.setEntity(se);
            &#125; catch (UnsupportedEncodingException e) &#123;
                e.printStackTrace();
            &#125;
        &#125;
        executeRequest(httpDelete, HttpMethod.DELETE);
    &#125;
    
    /**
     * 执行http请求。
     * @param httpRequest
     * @param method
     * @return
     */
    public String executeRequest(HttpUriRequest httpRequest, HttpMethod method) &#123;
        httpRequest.setHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);
        httpRequest.setHeader(&quot;Accept&quot;, &quot;application/json&quot;);
        CloseableHttpClient httpclient = HttpClients.createDefault();
        
        String result = new JSONObject().toString();
        CloseableHttpResponse response = null;
        try &#123;
            response = httpclient.execute(httpRequest);
            HttpEntity entity = response.getEntity();
            if(entity != null &amp;&amp; !&quot;&quot;.equals(entity)) &#123;
                result =  EntityUtils.toString(entity);
                if(result == null || &quot;&quot;.equals(result)) &#123;
                    result = new JSONObject().toString();
                &#125;
            &#125;
        &#125; catch (ClientProtocolException e) &#123;
            LOG.error(&quot;Request error! request=&quot; + httpRequest + &quot;, message=&quot; + e.getMessage());
            e.printStackTrace();
        &#125; catch (ParseException e) &#123;
            LOG.error(&quot;Request error! request=&quot; + httpRequest + &quot;, message=&quot; + e.getMessage());
            e.printStackTrace();
        &#125; catch (IOException e) &#123;
            LOG.error(&quot;Request error! request=&quot; + httpRequest + &quot;, message=&quot; + e.getMessage());
            e.printStackTrace();
        &#125;
        
        if(response != null &amp;&amp; response.getStatusLine().getStatusCode()/100 == 2 ) &#123;
            LOG.debug(&quot;Request success, request=&quot; + httpRequest + &quot;, result=&quot; + result);
            return result;
        &#125;else&#123;
            LOG.error(&quot;Request error! request=&quot; + httpRequest + &quot;, result=&quot; + result);
            return result;
        &#125;
    &#125;
&#125;
</code></pre>
<h2 id="Service接口"><a href="#Service接口" class="headerlink" title="Service接口"></a>Service接口</h2><pre><code>package com.inspur.bigdata.manage.cluster.host.service;

import java.util.List;
import java.util.Map;

/**
 *
 * Created by shirukai on 2017/12/4.
 */
public interface HostView &#123;
     /**
      * 获取api数据并树立后放入持久层
      */
     void setDataToDto();

     /**
      * 获取主机信息
      * @param limit 每页显示条数
      * @param start 从哪一条开始
      * @return 主机信息 list
      */
     Map&lt;String,Object&gt; getHostInfo(int limit, int start);

     /**
      * 模糊查询
      * @param limit 每页显示条数
      * @param start 从哪一条开始
      * @param param 查询参数
      * @return 主机信息 list
      */
     Map&lt;String,Object&gt; queryHostInfo(int limit,int start,String param);
&#125;
</code></pre>
<h2 id="Service层"><a href="#Service层" class="headerlink" title="Service层"></a>Service层</h2><pre><code>package com.inspur.bigdata.manage.cluster.host.service.impl;

import com.inspur.bigdata.manage.cluster.host.dao.HostList;
import com.inspur.bigdata.manage.cluster.host.util.HttpRequestUtil;
import com.inspur.bigdata.manage.cluster.host.service.HostView;
import net.sf.json.JSONArray;
import net.sf.json.JSONObject;
import org.apache.commons.codec.binary.Base64;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.stereotype.Service;

import java.util.*;

/**
 *
 * Created by shirukai on 2017/12/4.
 */
@Service
public class HostViewImpl implements HostView &#123;
    private static Log LOG = LogFactory.getLog(HostViewImpl.class);
    private HostList dtoList = new HostList();
    @Override
    public void setDataToDto() &#123;
        final Base64 base64 = new Base64();
        String requestUrl = &quot;http://10.110.13.216:8500/v1/kv/hosts?recurse&quot;;
        //获取主机信息
        String hostInfo = HttpRequestUtil.host().doGet(requestUrl);
        JSONArray jsonArray = JSONArray.fromObject(hostInfo);
        List&lt;Map&lt;String, String&gt;&gt; list = new ArrayList&lt;&gt;();
        try &#123;
            //base64解码
            for (int i = 0; i &lt; jsonArray.size(); i++) &#123;
                Map&lt;String, String&gt; map = new HashMap&lt;&gt;();
                JSONObject jsonObject = jsonArray.getJSONObject(i);
                String info = jsonObject.get(&quot;Value&quot;).toString();
                String jsonInfo = new String(base64.decode(info), &quot;UTF-8&quot;);
                JSONObject job = JSONObject.fromObject(jsonInfo);
                //遍历解码后数据并存入map封装
                Iterator iterator = job.keys();
                while (iterator.hasNext()) &#123;
                    String key = (String) iterator.next();
                    String value = job.getString(key);
                    map.put(key, value);
                &#125;
                list.add(map);
            &#125;
        &#125; catch (Exception e) &#123;
            LOG.error(e.getMessage(), e);
        &#125;
        dtoList.setList(list);
    &#125;

    @Override
    public Map&lt;String, Object&gt; getHostInfo(int limit, int start) &#123;
        List&lt;Map&lt;String, String&gt;&gt; dataList = dtoList.getList();
        Map&lt;String, Object&gt; resultMap = new HashMap&lt;&gt;();
        List&lt;Map&lt;String, String&gt;&gt; resultList;
        //分页显示主机信息
        int end = start + limit;
        //判断end是否超出list长度
        if (end &gt; dataList.size()) &#123;
            resultList = dataList.subList(start, dataList.size());
        &#125; else &#123;
            resultList = dataList.subList(start, end);
        &#125;
        resultMap.put(&quot;data&quot;, resultList);
        resultMap.put(&quot;total&quot;, dataList.size());
        return resultMap;
    &#125;

    @Override
    public Map&lt;String, Object&gt; queryHostInfo(int limit, int start, String param) &#123;
        List&lt;Map&lt;String, String&gt;&gt; dataList = dtoList.getList();
        Map&lt;String, Object&gt; resultMap = new HashMap&lt;&gt;();
        List&lt;Map&lt;String, String&gt;&gt; resultList = new ArrayList&lt;&gt;();
        for (Map&lt;String, String&gt; map : dataList
                ) &#123;
            //模糊搜索排除 monitor_url里的数据
            String monitor_url = map.get(&quot;monitor_url&quot;);
            map.remove(&quot;monitor_url&quot;);
            if ((map.toString()).contains(param)) &#123;
                map.put(&quot;monitor_url&quot;,monitor_url);
                resultList.add(map);
            &#125;
        &#125;
        //对查询结果进行分页
        List&lt;Map&lt;String, String&gt;&gt; list;
        int end = limit+start;
        if (end &gt; resultList.size())&#123;
            list = resultList.subList(start,resultList.size());
        &#125;else &#123;
            list = resultList.subList(start,end);
        &#125;
        resultMap.put(&quot;data&quot;, list);
        resultMap.put(&quot;total&quot;, resultList.size());
        return resultMap;
    &#125;
&#125;
</code></pre>
<h2 id="DTO层"><a href="#DTO层" class="headerlink" title="DTO层"></a>DTO层</h2><pre><code>package com.inspur.bigdata.manage.cluster.host.dao;

import net.sf.json.JSONObject;

import java.util.ArrayList;
import java.util.List;
import java.util.Map;

/**
 * list 数据持久化
 * Created by shirukai on 2017/12/4.
 */
public class HostList &#123;
    public List&lt;Map&lt;String,String&gt;&gt; list = new ArrayList&lt;&gt;();

    public List&lt;Map&lt;String,String&gt;&gt; getList() &#123;
        return list;
    &#125;

    public void setList(List&lt;Map&lt;String,String&gt;&gt; list) &#123;
        this.list = list;
    &#125;
&#125;
</code></pre>
<h2 id="Controller层"><a href="#Controller层" class="headerlink" title="Controller层"></a>Controller层</h2><pre><code>package com.inspur.bigdata.manage.cluster.host.controller;

import com.inspur.bigdata.manage.cluster.host.service.HostView;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

import java.util.Map;

/**
 * host主机信息显示controller
 * Created by shirukai on 2017/12/5.
 */
@Controller
@RequestMapping(value = &quot;/host&quot;)
public class HostController &#123;

    @Autowired
    private HostView hostView;

    /**
     * 访问
     * @return 返回jsp页面
     */
    @RequestMapping(value = &quot;/index&quot;)
    public String hostInfo() &#123;
        hostView.setDataToDto();
        return &quot;manage/host/hostInfo&quot;;
    &#125;

    /**
     * 获取主机数据
     * @param tableValue 请求参数 &#123;start: 0, limit: 2, dataTotal: true&#125;
     * @return 主机信息 list
     */
    @RequestMapping(&quot;/getData&quot;)
    @ResponseBody
    public Map&lt;String, Object&gt; getData(
            @RequestBody Map tableValue
    ) &#123;
        int limit = (int) tableValue.get(&quot;limit&quot;);
        int start = (int) tableValue.get(&quot;start&quot;);
        return hostView.getHostInfo(limit, start);
    &#125;

    /**
     * 模糊查询
     * @param tableValue 请求参数 &#123;start: 0, limit: 2, dataTotal: true&#125;
     * @param queryParam 查询参数
     * @return 主机信息 list
     */
    @RequestMapping(&quot;/query&quot;)
    @ResponseBody
    public Map&lt;String, Object&gt; queryData(
            @RequestBody Map tableValue,
            @RequestParam(&quot;queryParam&quot;) String queryParam
    ) &#123;
        int limit = (int) tableValue.get(&quot;limit&quot;);
        int start = (int) tableValue.get(&quot;start&quot;);
        return hostView.queryHostInfo(limit,start,queryParam);
    &#125;
&#125;
</code></pre>
<h2 id="知识点补充"><a href="#知识点补充" class="headerlink" title="知识点补充"></a>知识点补充</h2><h3 id="将json字符串转为JsonArray"><a href="#将json字符串转为JsonArray" class="headerlink" title="将json字符串转为JsonArray"></a>将json字符串转为JsonArray</h3><p>这里提供两种方法，将json字符串，一个是引入net.sf.json这个jar包，另一个是引入com.google.gson这个jar包</p>
<h4 id="1-net-sf-json"><a href="#1-net-sf-json" class="headerlink" title="1. net.sf.json"></a>1. net.sf.json</h4><p>maven引入依赖jar包</p>
<pre><code>    &lt;!--net.sf.json所需jar包--&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;
      &lt;artifactId&gt;json-lib&lt;/artifactId&gt;
      &lt;version&gt;2.4&lt;/version&gt;
      &lt;classifier&gt;jdk15&lt;/classifier&gt;
    &lt;/dependency&gt;
</code></pre>
<p>发送http请求之后得到的是json字符串。</p>
<p>将json字符串转成json数组，然后遍历json数组</p>
<pre><code>String result = HttpRequestUtil.http().doGet(&quot;http://10.110.13.216:8500/v1/kv/hosts?recurse&quot;);
JSONArray jsonArray = JSONArray.fromObject(result);
for (Object obj: jsonArray
        ) &#123;
    System.out.println(obj.toString());
&#125;
</code></pre>
<p>输出：</p>
<pre><code>&#123;&quot;LockIndex&quot;:0,&quot;Key&quot;:&quot;hosts/10.110.13.216&quot;,&quot;Flags&quot;:0,&quot;Value&quot;:&quot;eydpcCc6JzEwLjExMC4xMy4yMTYnLCdob3N0bmFtZSc6J2lkYXAtMTAtMTEwLTEzLTIxNi5pZGFwLmNvbScsJ2NwdSc6JzQnLCdtZW1vcnknOicyR0InLCdtb25pdG9yX3VybCc6J2h0dHA6Ly8xMC4xMTAuMTMuMjE2OjMwMDAvZGFzaGJvYXJkL2RiL25vZGUtZXhwb3J0ZXItc2VydmVyLW1ldHJpY3M/b3JnSWQ9MSZ2YXItbm9kZT0xMC4xMTAuMTMuMjE2OjkxMDAnfQ==&quot;,&quot;CreateIndex&quot;:310542,&quot;ModifyIndex&quot;:345959&#125;
&#123;&quot;LockIndex&quot;:0,&quot;Key&quot;:&quot;hosts/10.110.13.217&quot;,&quot;Flags&quot;:0,&quot;Value&quot;:&quot;eydpcCc6JzEwLjExMC4xMy4yMTcnLCdob3N0bmFtZSc6J2lkYXAtMTAtMTEwLTEzLTIxNy5pZGFwLmNvbScsJ2NwdSc6JzgnLCdtZW1vcnknOicxNkdCJywnbW9uaXRvcl91cmwnOidodHRwOi8vMTAuMTEwLjEzLjIxNjozMDAwL2Rhc2hib2FyZC9kYi9ub2RlLWV4cG9ydGVyLXNlcnZlci1tZXRyaWNzP29yZ0lkPTEmdmFyLW5vZGU9MTAuMTEwLjEzLjIxNzo5MTAwJ30=&quot;,&quot;CreateIndex&quot;:310544,&quot;ModifyIndex&quot;:345947&#125;
&#123;&quot;LockIndex&quot;:0,&quot;Key&quot;:&quot;hosts/10.110.13.219&quot;,&quot;Flags&quot;:0,&quot;Value&quot;:&quot;eydpcCc6JzEwLjExMC4xMy4yMTknLCdob3N0bmFtZSc6J2lkYXAtMTAtMTEwLTEzLTIxOS5pZGFwLmNvbScsJ2NwdSc6JzE2JywnbWVtb3J5JzonNjRHQicsJ21vbml0b3JfdXJsJzonaHR0cDovLzEwLjExMC4xMy4yMTY6MzAwMC9kYXNoYm9hcmQvZGIvbm9kZS1leHBvcnRlci1zZXJ2ZXItbWV0cmljcz9vcmdJZD0xJnZhci1ub2RlPTEwLjExMC4xMy4yMTk6OTEwMCd9&quot;,&quot;CreateIndex&quot;:310547,&quot;ModifyIndex&quot;:345948&#125;
</code></pre>
<h4 id="2-com-google-gson"><a href="#2-com-google-gson" class="headerlink" title="2. com.google.gson"></a>2. com.google.gson</h4><p>maven 引入jar包依赖</p>
<pre><code>    &lt;dependency&gt;
      &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;
      &lt;artifactId&gt;gson&lt;/artifactId&gt;
      &lt;version&gt;2.6.2&lt;/version&gt;
      &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;
</code></pre>
<p>将json字符串转json数组</p>
<pre><code>        String result = HttpRequestUtil.http().doGet(&quot;http://10.110.13.216:8500/v1/kv/hosts?recurse&quot;);
        JsonParser parser = new JsonParser();
        JsonArray jsonArray = parser.parse(result).getAsJsonArray();
        for (JsonElement obj: jsonArray
             ) &#123;
            System.out.println(obj.toString());
        &#125;
</code></pre>
<p>输出：</p>
<pre><code>&#123;&quot;LockIndex&quot;:0,&quot;Key&quot;:&quot;hosts/10.110.13.216&quot;,&quot;Flags&quot;:0,&quot;Value&quot;:&quot;eydpcCc6JzEwLjExMC4xMy4yMTYnLCdob3N0bmFtZSc6J2lkYXAtMTAtMTEwLTEzLTIxNi5pZGFwLmNvbScsJ2NwdSc6JzQnLCdtZW1vcnknOicyR0InLCdtb25pdG9yX3VybCc6J2h0dHA6Ly8xMC4xMTAuMTMuMjE2OjMwMDAvZGFzaGJvYXJkL2RiL25vZGUtZXhwb3J0ZXItc2VydmVyLW1ldHJpY3M/b3JnSWQ9MSZ2YXItbm9kZT0xMC4xMTAuMTMuMjE2OjkxMDAnfQ==&quot;,&quot;CreateIndex&quot;:310542,&quot;ModifyIndex&quot;:345959&#125;
&#123;&quot;LockIndex&quot;:0,&quot;Key&quot;:&quot;hosts/10.110.13.217&quot;,&quot;Flags&quot;:0,&quot;Value&quot;:&quot;eydpcCc6JzEwLjExMC4xMy4yMTcnLCdob3N0bmFtZSc6J2lkYXAtMTAtMTEwLTEzLTIxNy5pZGFwLmNvbScsJ2NwdSc6JzgnLCdtZW1vcnknOicxNkdCJywnbW9uaXRvcl91cmwnOidodHRwOi8vMTAuMTEwLjEzLjIxNjozMDAwL2Rhc2hib2FyZC9kYi9ub2RlLWV4cG9ydGVyLXNlcnZlci1tZXRyaWNzP29yZ0lkPTEmdmFyLW5vZGU9MTAuMTEwLjEzLjIxNzo5MTAwJ30=&quot;,&quot;CreateIndex&quot;:310544,&quot;ModifyIndex&quot;:345947&#125;
&#123;&quot;LockIndex&quot;:0,&quot;Key&quot;:&quot;hosts/10.110.13.219&quot;,&quot;Flags&quot;:0,&quot;Value&quot;:&quot;eydpcCc6JzEwLjExMC4xMy4yMTknLCdob3N0bmFtZSc6J2lkYXAtMTAtMTEwLTEzLTIxOS5pZGFwLmNvbScsJ2NwdSc6JzE2JywnbWVtb3J5JzonNjRHQicsJ21vbml0b3JfdXJsJzonaHR0cDovLzEwLjExMC4xMy4yMTY6MzAwMC9kYXNoYm9hcmQvZGIvbm9kZS1leHBvcnRlci1zZXJ2ZXItbWV0cmljcz9vcmdJZD0xJnZhci1ub2RlPTEwLjExMC4xMy4yMTk6OTEwMCd9&quot;,&quot;CreateIndex&quot;:310547,&quot;ModifyIndex&quot;:345948&#125;
</code></pre>
<h3 id="将json字符串转JSONObject"><a href="#将json字符串转JSONObject" class="headerlink" title="将json字符串转JSONObject"></a>将json字符串转JSONObject</h3><p>同样介绍两种方法</p>
<h4 id="1-net-sf-json-1"><a href="#1-net-sf-json-1" class="headerlink" title="1.net.sf.json"></a>1.net.sf.json</h4><pre><code>JSONObject jsonObject = jsonArray.getJSONObject(i);
</code></pre>
<p>遍历jsonobject获取key和value</p>
<pre><code>            Iterator iterator = jsonObject.keys();
            while (iterator.hasNext())&#123;
                String key = (String) iterator.next();
                String value = jsonObject.getString(key);
                System.out.println(key+value);
            &#125;
</code></pre>
<h4 id="2-com-google-gson-1"><a href="#2-com-google-gson-1" class="headerlink" title="2.com.google.gson"></a>2.com.google.gson</h4><p>遍历jsonobject获取键值</p>
<pre><code>for (JsonElement obj: jsonArray
     ) &#123;
   JsonObject jsonObject = new JsonParser().parse(jsonElement.toString()).getAsJsonObject();
    Iterator iterator = jsonObject.entrySet().iterator();
    while (iterator.hasNext())&#123;
        Map.Entry entry = (Map.Entry)iterator.next();
        System.out.println(entry.getKey());
        System.out.println(entry.getValue());
    &#125;
&#125;
</code></pre>
<p>根据指定key获取值</p>
<pre><code>JsonObject jsonObject = parser.parse(obj.toString()).getAsJsonObject();
System.out.println(jsonObject.get(&quot;Key&quot;));
</code></pre>
<p>将json字符串转map</p>
<pre><code>//json转map obj.toString是一个json字符串
Gson gson = new Gson();
Type type = new TypeToken&lt;Map&lt;String, String&gt;&gt;()&#123;&#125;.getType();
Map&lt;String, String&gt; map = gson.fromJson(obj.toString(), type);
System.out.println(map.get(&quot;Key&quot;)
</code></pre>
<p>总代码</p>
<pre><code>  /**
     * 使用 谷歌json工具
     */
    @Test
    public void useGson()&#123;
        //get json String
        String jsonString = HttpRequestUtil.http().doGet(&quot;http://10.110.13.216:8500/v1/kv/hosts?recurse&quot;);
        // transition jsonString to jsonArray
        JsonArray jsonArray = new JsonParser().parse(jsonString).getAsJsonArray();
        //traversal jsonArray
        for (JsonElement jsonElement:jsonArray)&#123;
            System.out.println(jsonElement.toString());
            //transition jsonString to jsonObject
            JsonObject jsonObject = new JsonParser().parse(jsonElement.toString()).getAsJsonObject();
            //traversal jsonObject
            //method 1:use Iterator
            Iterator iterator = jsonObject.entrySet().iterator();
            while (iterator.hasNext())&#123;
                Map.Entry entry = (Map.Entry)iterator.next();
                System.out.println(entry.getKey());
                System.out.println(entry.getValue());
            &#125;
            //method 2: traversal map,first transition jsonString to map then traversal map
            Gson gson = new Gson();
            Type type = new TypeToken&lt;Map&lt;String, String&gt;&gt;()&#123;&#125;.getType();
            Map&lt;String, String&gt; map = gson.fromJson(jsonElement.toString(), type);
            //遍历map
            // TODO
        &#125;
    &#125;
</code></pre>
<h3 id="base64编解码"><a href="#base64编解码" class="headerlink" title="base64编解码"></a>base64编解码</h3><pre><code>public void base64EncodeAndDecode()throws Exception&#123;
    Base64 base64 = new Base64();
    String text = &quot;快点用base64来把我编码&quot;;
    byte[] textByte = text.getBytes(&quot;UTF-8&quot;);
    //编码
    String encodeText = base64.encodeToString(textByte);
    System.out.println(encodeText);
    //解码
    String decodeText = new String(base64.decode(encodeText),&quot;UTF-8&quot;);
    System.out.println(decodeText);
&#125;
</code></pre>
<p>base64工具类</p>
<pre><code>/**
 * base工具类
 * Created by shirukai on 2017/12/11.
 */
public class Base64Util &#123;
    static String encode(String text) &#123;
        Base64 base64 = new Base64();
        try &#123;
            byte[] textBytes = text.getBytes(&quot;UTF-8&quot;);
            return base64.encodeToString(textBytes);
        &#125; catch (Exception e) &#123;
            System.out.println(e.getMessage());
        &#125;
        return null;
    &#125;
    static String decode(String encodeText)&#123;
        Base64 base64 = new Base64();
        try &#123;
            return new String(base64.decode(encodeText),&quot;UTF-8&quot;);
        &#125; catch (Exception e) &#123;
            System.out.println(e.getMessage());
        &#125;
        return null;
    &#125;
&#125;
</code></pre>
<h3 id="list分页读取"><a href="#list分页读取" class="headerlink" title="list分页读取"></a>list分页读取</h3><pre><code>public Map&lt;String, Object&gt; getHostInfo(int limit, int start) &#123;
    List&lt;Map&lt;String, String&gt;&gt; dataList = dtoList.getList();
    Map&lt;String, Object&gt; resultMap = new HashMap&lt;&gt;();
    List&lt;Map&lt;String, String&gt;&gt; resultList;
    //分页显示主机信息
    int end = start + limit;
    //判断end是否超出list长度
    if (end &gt; dataList.size()) &#123;
        resultList = dataList.subList(start, dataList.size());
    &#125; else &#123;
        resultList = dataList.subList(start, end);
    &#125;
    resultMap.put(&quot;data&quot;, resultList);
    resultMap.put(&quot;total&quot;, dataList.size());
    return resultMap;
&#125;
</code></pre>
<h3 id="对list进行模糊搜索、排除指定内容"><a href="#对list进行模糊搜索、排除指定内容" class="headerlink" title="对list进行模糊搜索、排除指定内容"></a>对list进行模糊搜索、排除指定内容</h3><pre><code>    public Map&lt;String, Object&gt; queryHostInfo(int limit, int start, String param) &#123;
        List&lt;Map&lt;String, String&gt;&gt; dataList = dtoList.getList();
        Map&lt;String, Object&gt; resultMap = new HashMap&lt;&gt;();
        List&lt;Map&lt;String, String&gt;&gt; resultList = new ArrayList&lt;&gt;();
        for (Map&lt;String, String&gt; map : dataList
                ) &#123;
            //模糊搜索排除 monitor_url里的数据
            String monitor_url = map.get(&quot;monitor_url&quot;);
            map.remove(&quot;monitor_url&quot;);
            if ((map.toString()).contains(param)) &#123;
                map.put(&quot;monitor_url&quot;,monitor_url);
                resultList.add(map);
            &#125;
        &#125;
        //对查询结果进行分页
        List&lt;Map&lt;String, String&gt;&gt; list;
        int end = limit+start;
        if (end &gt; resultList.size())&#123;
            list = resultList.subList(start,resultList.size());
        &#125;else &#123;
            list = resultList.subList(start,end);
        &#125;
        resultMap.put(&quot;data&quot;, list);
        resultMap.put(&quot;total&quot;, resultList.size());
        return resultMap;
    &#125;
</code></pre>
<h3 id="jsp页面"><a href="#jsp页面" class="headerlink" title="jsp页面"></a>jsp页面</h3><pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;
         pageEncoding=&quot;UTF-8&quot; isELIgnored=&quot;false&quot; %&gt;
&lt;%@ taglib uri=&quot;/tags/loushang-web&quot; prefix=&quot;l&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;l:asset path=&#39;css/bootstrap.css&#39;/&gt;&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;l:asset path=&#39;css/font-awesome.css&#39;/&gt;&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;l:asset path=&#39;css/ui.css&#39;/&gt;&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;l:asset path=&#39;css/form.css&#39;/&gt;&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;l:asset path=&#39;css/datatables.css&#39;/&gt;&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;l:asset path=&#39;css/slickgrid.css&#39;/&gt;&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;l:asset path=&#39;manage/cluster/config/css/insertcluster.css&#39;/&gt;&quot;/&gt;

    &lt;!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --&gt;
    &lt;!-- WARNING: Respond.js doesn&#39;t work if you view the page via file:// --&gt;
    &lt;!--[if lt IE 9]&gt;
    &lt;script src=&quot;&lt;l:asset path=&#39;html5shiv.js&#39;/&gt;&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;&lt;l:asset path=&#39;respond.js&#39;/&gt;&quot;&gt;&lt;/script&gt;
    &lt;![endif]--&gt;

    &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;l:asset path=&#39;jquery.js&#39;/&gt;&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;l:asset path=&#39;bootstrap.js&#39;/&gt;&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;l:asset path=&#39;form.js&#39;/&gt;&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;l:asset path=&#39;ui.js&#39;/&gt;&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;l:asset path=&#39;loushang-framework.js&#39;/&gt;&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;l:asset path=&#39;datatables.js&#39;/&gt;&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;style type=&quot;text/css&quot;&gt;
    body &#123;
        background: #FFFFFF;
    &#125;
    .hostContainer&#123;
        width: 98%;
        margin: 0 auto;
    &#125;
&lt;/style&gt;
&lt;body&gt;
&lt;br&gt;
&lt;div class=&quot;hostContainer&quot;&gt;
    &lt;div class=&quot;col-xs-12 col-md-12&quot;&gt;
        &lt;div class=&quot;row&quot;&gt;
            &lt;form class=&quot;form-inline&quot;&gt;
                &lt;div class=&quot;input-group&quot;&gt;
                    &lt;input class=&quot;form-control ue-form&quot; type=&quot;text&quot; id=&quot;queryParam&quot; placeholder=&quot;请输入要搜索的内容&quot;&gt;
                    &lt;div class=&quot;input-group-addon ue-form-btn&quot; id=&quot;query&quot;&gt;
                        &lt;span class=&quot;fa fa-search&quot;&gt;&lt;/span&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;div style=&quot;height: 34px&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;hostContainer&quot;&gt;
    &lt;table id=&quot;hostList&quot; class=&quot;table table-bordered table-hover&quot;&gt;
        &lt;thead&gt;
        &lt;tr&gt;
            &lt;th width=&quot;10%&quot; data-field=&quot;hostname&quot; data-render=&quot;rendernumber&quot;&gt;序号&lt;/th&gt;
            &lt;th width=&quot;18%&quot; data-field=&quot;hostname&quot;&gt;主机名&lt;/th&gt;
            &lt;th width=&quot;18%&quot; data-field=&quot;ip&quot;&gt;主机ip&lt;/th&gt;
            &lt;th width=&quot;18%&quot; data-field=&quot;cpu&quot;&gt;cpu&lt;/th&gt;
            &lt;th width=&quot;18%&quot; data-field=&quot;memory&quot;&gt;内存&lt;/th&gt;
            &lt;th width=&quot;18%&quot; data-field=&quot;monitor_url&quot; data-render=&quot;renderoptions&quot;&gt;操作&lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
    &lt;/table&gt;
&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
    var context = &quot;&lt;%=request.getContextPath()%&gt;&quot;;
    $(document).ready(function () &#123;
        //初始化datatable
        var options = &#123;
            ordering: false,
            iDisplayLength: 10
        &#125;;
        var url = context + &quot;/service/host/getData&quot;;
        grid = new L.FlexGrid(&quot;hostList&quot;, url);
        grid.init(options);

        //条件查询
        $(&quot;#query&quot;).bind(&quot;click&quot;, function () &#123;
            var queryParam = $(&quot;#queryParam&quot;).val();
            var url = context + &quot;/service/host/query?queryParam=&quot; + queryParam;
            grid.reload(url);
        &#125;);
    &#125;);

    //重新渲染序号
    function rendernumber(data, type, row, meta) &#123;
        return meta.row + meta.settings._iDisplayStart + 1;
    &#125;

    //重新渲染操作
    function renderoptions(data, type, full) &#123;
        return &#39;&lt;div class=&quot;btn-group pull-center&quot;&gt;&lt;a href=&quot;&#39; + data + &#39;&quot; target=&quot;_blank&quot;&gt;监控&lt;/a&gt;&lt;/div&gt;&#39;
    &#125;
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
            <ul id="audio-list" style="display:none">
                
                
                <li title='0' data-url='/statics/Otokaze - Mallow Flower.mp3'></li>
                
                    
            </ul>
            
            
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="http://shirukai.gitee.io/images/a2199f66b2599b9ee3c7bba89fbac4b4.jpg" height=300 width=300></img>
                    <p>shirukai</p>
                    <span>Alway believe that something wonderful is about to happen</span>
                    <dl>
                        <dd><a href="https://github.com/shirukai" target="_blank"><span
                                    class=" iconfont icon-github"></span></a></dd>
                        <dd><a href="" target="_blank"><span
                                    class=" iconfont icon-twitter"></span></a></dd>
                        <dd><a href="" target="_blank"><span
                                    class=" iconfont icon-stack-overflow"></span></a></dd>
                    </dl>
                </div>
                <ul>
                    <li><a href="/">285 <p>Articles</p></a></li>
                    <li><a href="/categories">25 <p>Categories</p></a></li>
                    <li><a href="/tags">46 <p>Tags</p></a></li>
                </ul>
            </div>
            
            
            
            <div class="box sticky animated fadeInRight faster">
                <div id="toc" class="subbox">
                    <h4>Contents</h4>
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E"><span class="toc-number">1.</span> <span class="toc-text">说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E5%88%B0%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A"><span class="toc-number">2.</span> <span class="toc-text">用到的知识点：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%EF%BC%9A"><span class="toc-number">2.1.</span> <span class="toc-text">后端：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E5%8F%B0%EF%BC%9A"><span class="toc-number">2.2.</span> <span class="toc-text">前台：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#java-http%E8%AF%B7%E6%B1%82api"><span class="toc-number">3.</span> <span class="toc-text">java http请求api</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Service%E6%8E%A5%E5%8F%A3"><span class="toc-number">4.</span> <span class="toc-text">Service接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Service%E5%B1%82"><span class="toc-number">5.</span> <span class="toc-text">Service层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DTO%E5%B1%82"><span class="toc-number">6.</span> <span class="toc-text">DTO层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Controller%E5%B1%82"><span class="toc-number">7.</span> <span class="toc-text">Controller层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%A1%A5%E5%85%85"><span class="toc-number">8.</span> <span class="toc-text">知识点补充</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86json%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E4%B8%BAJsonArray"><span class="toc-number">8.1.</span> <span class="toc-text">将json字符串转为JsonArray</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86json%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%ACJSONObject"><span class="toc-number">8.2.</span> <span class="toc-text">将json字符串转JSONObject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#base64%E7%BC%96%E8%A7%A3%E7%A0%81"><span class="toc-number">8.3.</span> <span class="toc-text">base64编解码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#list%E5%88%86%E9%A1%B5%E8%AF%BB%E5%8F%96"><span class="toc-number">8.4.</span> <span class="toc-text">list分页读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9list%E8%BF%9B%E8%A1%8C%E6%A8%A1%E7%B3%8A%E6%90%9C%E7%B4%A2%E3%80%81%E6%8E%92%E9%99%A4%E6%8C%87%E5%AE%9A%E5%86%85%E5%AE%B9"><span class="toc-number">8.5.</span> <span class="toc-text">对list进行模糊搜索、排除指定内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jsp%E9%A1%B5%E9%9D%A2"><span class="toc-number">8.6.</span> <span class="toc-text">jsp页面</span></a></li></ol></li></ol>
                </div>
            </div>
            
            
        </div>
    </div>
</div>

    </div>
</div>
    <div id="back-to-top" class="animated fadeIn faster">
        <div class="flow"></div>
        <span class="percentage animated fadeIn faster">0%</span>
        <span class="iconfont icon-top02 animated fadeIn faster"></span>
    </div>
</body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2021
        <span class="gradient-text">
            shirukai
        </span>.
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
        Theme
        <span class="gradient-text">
            <a href="https://github.com/TriDiamond/hexo-theme-obsidian" title="Obsidian" target="_blank" rel="noopener">Obsidian</a>
        </span>
        <small><a href="https://github.com/TriDiamond/hexo-theme-obsidian/blob/master/CHANGELOG.md" title="v1.4.3" target="_blank" rel="noopener">v1.4.3</a></small>
    </p>
</footer>

<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script>
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX", "TeX"],
      linebreaks: {
        automatic: true
      },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [
        ["$", "$"],
        ["\\(", "\\)"]
      ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      noUndefined: {
        attributes: {
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "90%"
        }
      },
      Macros: {
        href: "{}"
      }
    },
    messageStyle: "none"
  });
</script>
<script>
  function initialMathJax() {
    MathJax.Hub.Queue(function () {
      var all = MathJax.Hub.getAllJax(),
        i;
      // console.log(all);
      for (i = 0; i < all.length; i += 1) {
        console.log(all[i].SourceElement().parentNode)
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  }

  function reprocessMathJax() {
    if (typeof MathJax !== 'undefined') {
      MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
  }
</script>




<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/obsidian.js"></script>
<script src="/js/jquery.truncate.js"></script>
<script src="/js/search.js"></script>


<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>


<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>


<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>

    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>




    
<script src="/js/busuanzi.min.js"></script>

    <script>
        $(document).ready(function () {
            if ($('span[id^="busuanzi_"]').length) {
                initialBusuanzi();
            }
        });
    </script>



<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">


<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>



    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="//www.googletagmanager.com/gtag/js?id=UA-149874671-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-149874671-1');
    </script>





<script>
    function initialTyped () {
        var typedTextEl = $('.typed-text');
        if (typedTextEl && typedTextEl.length > 0) {
            var typed = new Typed('.typed-text', {
                strings: ["Alway believe that something wonderful is about to happen", "心之所向，素履以往。"],
                typeSpeed: 90,
                loop: true,
                loopCount: Infinity,
                backSpeed: 20,
            });
        }
    }

    if ($('.article-header') && $('.article-header').length) {
        $(document).ready(function () {
            initialTyped();
        });
    }
</script>




</html>
